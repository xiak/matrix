# 通讯中使用1个bit设置多个flag

在通讯协议中，有很多标记位需要设置，如一条消息可能包含一下的属性

```bash
const (
    Request int = iota
    Response
)
const (
    // 没有错误的消息
    Success = iota
    // 包含错误的消息
    Fail
)

// 是否为心跳消息
func IsHeartBeatMessage() bool {
    ....
}
```

## 位
1 Byte == 8 Bit
在go语言中 byte的别名是uint8 范围为0-255 (0x00 ~ 0xff)

## 位运算

### 按位与 `&`

对应位置上都为1，结果才为1，其他情况都为0
```$bash
1 & 1 == 1
1 & 0 == 0
0 & 1 == 0
0 & 0 == 0
```
### 按位或 `|`

对应位置只要有一个为1，结果便为1，其他情况为0
```$bash
1 | 1 == 1
1 | 0 == 1
0 | 1 == 1
0 | 0 == 0
```
### 按位异或 `^`

对应位置不同为1，相同为0
```$bash
1 ^ 1 == 1
1 ^ 0 == 1
0 ^ 1 == 1
0 ^ 0 == 0
```

### 按位与非 `&^`
把指定位置的值设为0， 其他位置的数据不变
```$bash
// 1111 0110
a := 0xf6 
// 去掉第一个1, 其他保持不变
// 0x80 == 1000 0000
// 结果是0x76 即：0111 0110
fmt.Printf("%#v\n", a &^ 0x80)
```